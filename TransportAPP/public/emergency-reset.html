<!DOCTYPE html>
<html>
<head>
    <title>DÃ©blocage d'urgence</title>
    <style>
        body { font-family: Arial; text-align: center; padding: 50px; }
        .button { 
            background: #dc2626; color: white; padding: 15px 30px; 
            border: none; border-radius: 8px; cursor: pointer; 
            font-size: 18px; margin: 10px;
        }
        .button:hover { background: #b91c1c; }
    </style>
</head>
<body>
    <h1>ðŸš¨ DÃ©blocage d'urgence Transport APP</h1>
    <p>Si l'application reste bloquÃ©e en chargement :</p>
    
    <button class="button" onclick="forceCleanup()">
        ðŸ§¹ Nettoyage forcÃ© + Redirection
    </button>
    
    <button class="button" onclick="justRedirect()">
        ðŸ”„ Redirection directe vers login
    </button>
    
    <div id="status" style="margin-top: 20px; font-weight: bold;"></div>
    
    <script>
        function forceCleanup() {
            document.getElementById('status').innerHTML = 'ðŸ§¹ Nettoyage en cours...';
            
            // Nettoyage brutal
            localStorage.clear();
            sessionStorage.clear();
            
            // Forcer les cookies aussi
            document.cookie.split(";").forEach(function(c) { 
                document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/"); 
            });
            
            setTimeout(() => {
                document.getElementById('status').innerHTML = 'âœ… Nettoyage terminÃ©, redirection...';
                window.location.href = '/login';
            }, 1000);
        }
        
        function justRedirect() {
            document.getElementById('status').innerHTML = 'ðŸ”„ Redirection...';
            window.location.href = '/login';
        }
        
        // Auto-nettoyage si demandÃ©
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('auto') === 'true') {
            forceCleanup();
        }
    </script>
</body>
</html>